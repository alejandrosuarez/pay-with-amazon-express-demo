<h1>Login and Pay Express Integration</h1>

<label for="tshirt">Item Name: Long Sleeve Tshirt</label>
<br>
<div id="amount" value="100">Price: $100</div>
<label for="quantity">Qty:</label>

<select id="QuantitySelect">
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
  <option value="4">4</option>
</select>
<br><br>

<div id="AmazonPayButton"></div>

<script type="text/javascript">
OffAmazonPayments.Button("AmazonPayButton", "<%= Rails.application.secrets.seller_id %>", {

  type: "hostedPayment",

  hostedParametersProvider: function(done) {

    $.getJSON('/home/signature', {
      payment_amount: parseInt($("#amount").attr("value")) * parseInt($("#QuantitySelect option:selected" ).val()),
      payment_currency: 'USD',
      seller_note:'Testing Dynamic Express Amazon Payments'

    }, function(data) {
      done(data);
    })
  },
  onError: function(errorCode) {
    console.log(errorCode.getErrorCode() + " " + errorCode.getErrorMessage());
  }
});
</script>
